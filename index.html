<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Prueba Movimiento VR</title>
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-joystick-controls@4.0.3/dist/aframe-joystick-controls.min.js"></script>
  </head>
  <body>
    <a-scene>

      <!-- Cámara y rig con joystick -->
      <a-entity id="rig" joystick-controls="hand: left; speed: 0.1">
        <a-entity camera look-controls position="0 1.6 0"></a-entity>
      </a-entity>

      <!-- Suelo -->
      <a-plane color="#e0e0e0" height="100" width="100" rotation="-90 0 0"></a-plane>

      <!-- Cubo grande al fondo para referencia -->
      <a-box position="0 1 -10" depth="1" height="2" width="2" color="#4CC3D9"></a-box>
      <a-box position="2 1 -20" depth="1" height="2" width="2" color="#F55555"></a-box>
      <a-box position="-2 1 -30" depth="1" height="2" width="2" color="#7BC8A4"></a-box>

      <!-- Luz -->
      <a-entity light="type: directional; intensity: 0.8" position="1 3 1"></a-entity>

      <a-entity debug-joystick>
  <a-text id="debugText" value="Esperando..." position="0 2 -2" color="black"></a-text>
</a-entity>


    </a-scene>
    <script>
  AFRAME.registerComponent("debug-joystick", {
    tick: function () {
      const gamepads = navigator.getGamepads();
      const gp = gamepads[0]; // También puedes probar con [1]
      if (!gp) return;

      const x = gp.axes[2];
      const y = gp.axes[3];

      const text = `Joystick: X=${x.toFixed(2)} Y=${y.toFixed(2)}`;
      const display = document.querySelector("#debugText");
      if (display) {
        display.setAttribute("value", text);
      }
    }
  });
</script>

  </body>
</html>
